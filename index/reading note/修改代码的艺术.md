---
aliases: 修改代码的艺术
tags:
  - 读书笔记/修改代码的艺术
date updated: 2024-05-26 10:28
---

## 修改代码的原因

- 添加新特性
- 修正bug
- 改善设计 改变既有软件的结构和组织，以另其更易于维护
- 优化  减少资源使用，内存、时间等

## 修改的风险

- 我们要进行哪些修改
- 我们如何得知已经正确地完成了修改
- 我们如何得知没有破坏任何（既有的）东西

## 修改的方式

### 编辑并祈祷

仔细的计划你所需要进行的改动，并确保自己理解了将要修改的代码，然后再开始改动。结束之后，运行修改后的系统，看看所做的改动是否生效，在然后对系统整体的验证，以确保改动没有破坏什么东西。

### 覆盖并修改

将测试覆盖在我们修改的代码上面，以确保糟糕的改动不会泄露出去并感染到软件的其他部分。这样就可以放心对它进行修改，并快速验出修改是好是坏。==通过测试来检验变化==。

## 单元测试

关心的是一个系统的最为`原子`的行为单元，好的单元测试应具备：

1. 隔离性
2. 运行快
3. 能帮助我们快速定位问题所在

以下不属于单元测试：

1. 跟数据库有交互
2. 进行了网络间通信
3. 调用了文件系统
4. 需要对环境做特定的准备（如编辑配置文件）才能运行的。


## 依赖性

依赖性是软件开发中最为关键的问题之一，在修改代码的过程中很大一部分工作都是围绕着 `解除依赖性以使改动变得更容易` 这个目标来进行的。
