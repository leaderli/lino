---
tags:
  - linux/commands/ps
date updated: 2024-06-27 12:45
---

当前正在运行的进程的快照信息

- `-e` 显示所有进程，而不仅仅是当前用户的进程。
- `-f` 显示完整格式的输出，包括更多的进程信息
- `-u` 显示指定用户的进程
- `-p  <PID>`：仅显示指定PID的进程信息，可以不用关键字
- `-o <FORMAT>`：自定义输出格式，指定要显示的列。
- `--forest` 展示进程树，也可以使用`pstree`查看

  常用格式：

  - `pid`：进程ID。
  - `ppid`：父进程ID。
  - `args`： 带参数的命令
  - `cmd`： 带参数的命令
  - `command`： 带参数的命令
  - `comm`： 命令名称
  - `%cpu`：CPU使用率。
  - `%mem`：内存使用率。
  - `start`：进程的启动时间。
  - `time`：进程的累计运行时间。
- `--no-headers`：禁止显示列标题行

格式字段后面带`=` 一般表示不用标题行

## 进程状态

Linux 系统中时刻运行着许多进程，如果能够合理地管理它们，则可以优化系统的性能。在 Linux 系统中有 5 种常见的进程状态，分别为运行、中断、不可中断、僵死与停止，其各自含义如下所示

- R（运行） ：进程正在运行或在运行队列中等待
- S（中断）：程处于休眠中，当某个条件形成后或者接收到信号时，则脱离该状态。
- D（不可中断）：进程不响应系统异步信号，即便用 kill 命令也不能将其中断。
- Z（僵死）：进程已经终止，但进程描述符依然存在, 直到父进程调用 wait4()系统函数后将进程释放。
- T（停止）：进程收到停止信号后停止运行。

除了上面 5 种常见的进程状态，还有可能是高优先级`<`、低优先级`N`、被锁进内存`L`、包含子进程`s`以及多线程`l`这 5 种补充形式。

## 示例

### 查询正在运行的所有进程信息

```shell
   ps -ef
```

### 查询归属于用户 colin115 的进程

```shell
ps -ef | grep colin115
ps -lu colin115
```

### 查询进程 ID（适合只记得部分进程字段）

```shell
pgrep <name>

```

### 以完整的格式显示所有的进程

```shell
ps -ajx
```

### 显示进程内存占用

```shell
ps -aux
```

### 显示内存占用较多的进程

```shell
ps -aux --sort=-rss|head 10
```

### 进程树

```shell
# ps  --forest
  PID TTY          TIME CMD
 5713 pts/0    00:00:00 su
 5722 pts/0    00:00:00  \_ bash
 6401 pts/0    00:00:00      \_ sqlite3
13207 pts/0    00:00:00      \_ ps
```

## 参考

[ps(1) - Linux manual page](https://man7.org/linux/man-pages/man1/ps.1.html)
