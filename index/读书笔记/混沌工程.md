---
aliases: 混沌工程
tags:
  - 读书笔记/混沌工程
date updated: 2024-07-16 12:44
---

## 概述

混沌工程被定义为通过实验性的方法，从而建立对系统抵御生产环境中突发事件 能力信心的学科。是一种软件测试方法，着重于在用户遇到问题之前找到问题。

混沌工程实验(简称混沌实验)是混沌工程的基本单元。

混沌工程不是关于随机破坏事物的，而是要添加可控数量的可理解的故障。要学会如何批判性地看待系统，并预测脆弱的点在哪里。

混沌工程无法自动解决你的问题，提出有意义的假设需要你对系统的了解程度、想要对其进行测试的深度，以及建立可观测性的程度。

## 四个步骤

与任何实验一样，你首先要形成一个你想要证明或反驳的假设，然后围绕这个想法 设计整个实验

![[混沌工程_四个步骤|100]]

### 可观测性

你需要能够观察你的结果，例如：你的网站正在运行、CPU负载、每秒请求数，还是成功请求的延迟。要确保你可以准确地获取你想要观察的数据

### 稳态

使用观测到的数据，你需要定义什么是正常的，以便可以测量异常情况。例如，你可能希望应用程序服务器在工作周内平均15分钟的CPU负载低于 20%。数据在正常范围内通常称为稳态

### 假设

你利用可以可靠地收集(可观测性)到的数据，将你的直觉塑造成一个可以被证 明或被反驳的假设。一个简单的例子是“终止其中一台机器不会影响平均服务延迟”

### 验证

你运行实验，进行测量以得出你是否正确的结论。有趣的是，你希望得到错误的 结果，因为这样你可以从中学到更多。清理环境并重复这些步骤

## 爆炸半径

爆炸半径是指一个动作或行为能影响到的事物的最大数量

限制混沌实验能影响的事物的数量，讲实验出错时，发生灾难性事件的空间最小化。限制爆炸半径的方法：

1. 在一小部分流量上运行试验，然后在进行扩展
2. 在开始生产环境之前，限制测试环境中运行
3. 实现自动化，以便更轻松重现你的发现

## USE方法

首先确定资源，然后针对每个资源检查错 误。如果找到，你将进行调查并尝试修复它们。否则，检查利用率级别。如果高，则需 要进一步调查。否则，再看看饱和度，如果看起来有问题，则需要进行更深入的研究。

![[Pasted image 20240712125920.png]]

## 常见薄弱环节

1. 网络
2. 磁盘 `I/O`

## 名词

### 资源

资源是构成物理服 务器的任何物理组件，如CPU、磁盘、网络设备和RAM，还包括软件资源，如线程、 PID或inode ID。

### 利用率

资源的利用率由平均时间或所使用资源的比例表示。例如，对于 CPU，一个有意义的指标是花费在工作上的时间百分比。对于磁盘，磁盘所占的百分比 是一个有意义的指标，磁盘的吞吐量也是一个有意义的指标

### 饱和度

饱和度是指资源在 任何给定时刻无法处理的工作量(通常是排队的)。高饱和度可能是一个问题的标志， 但也可能是非常理想的(例如，在批处理系统中，我们希望尽可能使用接近100%的可用处理能力)。
